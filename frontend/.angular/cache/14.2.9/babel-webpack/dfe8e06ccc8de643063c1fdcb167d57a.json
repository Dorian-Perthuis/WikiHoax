{"ast":null,"code":"import { ElementRef, Renderer2 } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/game.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../shared/components/textbox/textbox.component\";\nimport * as i4 from \"../../shared/components/carrousel/carrousel.component\";\nconst _c0 = [\"titleId\"];\nconst _c1 = [\"textId\"];\n\nfunction GamePageComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\", 14);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const word_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.testedWords.length - i_r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(word_r5);\n  }\n}\n\nfunction GamePageComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r7.lenght);\n  }\n}\n\nfunction GamePageComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r8.lenght);\n  }\n}\n\nexport let GamePageComponent = /*#__PURE__*/(() => {\n  class GamePageComponent {\n    constructor(renderer, gameService) {\n      this.renderer = renderer;\n      this.gameService = gameService;\n      this.titleSplit = [];\n      this.textSplit = [];\n      /*titleText : string = \"Comment écrire une histoire d'amour.\";\r\n      mainText : string = \"La partie la plus excitante dans le fait de tomber amoureux est souvent le début d'une romance, la rencontre fortuite et parfois amusante avec l'être aimé, l'insouciance et la joie qu'accompagnent la réalisation que cette attirance est mutuelle, le confort et la sécurité de pouvoir se reposer sur une autre personne et construire une vie à deux, etc. Gardez tous ces aspects en tête lorsque vous commencerez à écrire votre histoire d'amour. Car le plus important, au-delà de vos personnages, intrigues et style d'écriture, sera de captiver votre lecteur et de le rendre aussi impatient que vos héros à l'idée de cet amour naissant.\"\r\n      */\n\n      this.titleText = \"\";\n      this.mainText = \"\";\n      this.titleItems = [];\n      this.mainItems = [];\n      this.images = [];\n      this.mot = \"\";\n      this.testedWords = [];\n    }\n\n    ngOnInit() {\n      this.gameService.getGamePage().subscribe(json => {\n        this.titleText = json.titre;\n        this.mainText = json.description;\n        this.images = json.images;\n        this.splitText(this.titleText, this.titleItems);\n        this.splitText(this.mainText, this.mainItems);\n        this.updateStyle(this.titleElement, this.titleItems);\n        this.updateStyle(this.textElement, this.mainItems);\n      });\n    }\n\n    ngAfterViewInit() {}\n\n    splitText(text, array) {\n      for (var i = 0; i < text.length; i++) {\n        if (text[i] === \".\" || text[i] === \",\") {\n          text = [text.slice(0, i), ' ', text.slice(i)].join('');\n          i += 1;\n        } else if (text[i] === \"'\") {\n          text = [text.slice(0, i), ' ', text.slice(i, i + 1), ' ', text.slice(i + 1)].join('');\n          i += 2;\n        }\n      }\n\n      text.split(\" \").forEach((e, index) => {\n        array.push({\n          id: index,\n          text: e,\n          lenght: e.length,\n          find: false\n        });\n      });\n    }\n\n    updateStyle(htmlElement, items) {\n      htmlElement.nativeElement.childNodes.forEach((htmlElement, index) => {\n        if (typeof items[index] != \"undefined\") {\n          this.renderer.setStyle(htmlElement, 'width', `${10 * items[index].lenght + 5}px`);\n\n          if (items[index].text === '.' || items[index].text === ',' || items[index].text === \"'\") {\n            items[index].find = true;\n            this.renderer.setProperty(htmlElement, 'textContent', items[index].text);\n            this.renderer.setStyle(htmlElement, 'width', 'initial');\n            this.renderer.addClass(htmlElement, 'show');\n            this.renderer.removeClass(htmlElement, \"hide\");\n          }\n        }\n      });\n    }\n\n    updateInput(mot) {\n      this.mot = mot.trim();\n    }\n\n    testMot() {\n      this.findMot(this.mot, this.mainItems, this.textElement.nativeElement.childNodes);\n      this.findMot(this.mot, this.titleItems, this.titleElement.nativeElement.childNodes, true);\n      this.testWin();\n\n      if (!this.testedWords.includes(this.mot)) {\n        this.testedWords.push(this.mot);\n      }\n    }\n\n    findMot(mot, array, htmlElements, hasNbFind = false) {\n      array.forEach((e, index) => {\n        if (!e.find && e.text.toLocaleLowerCase() == mot.toLocaleLowerCase()) {\n          e.find = true;\n          this.renderer.setProperty(htmlElements[index], 'textContent', e.text);\n          this.renderer.setStyle(htmlElements[index], 'width', 'initial');\n          this.renderer.addClass(htmlElements[index], 'show');\n          this.renderer.removeClass(htmlElements[index], \"hide\");\n        }\n      });\n    }\n\n    testWin() {\n      if (this.titleItems.every(e => e.find === true)) {\n        this.mainItems.forEach((e, index) => {\n          this.renderer.setProperty(this.textElement.nativeElement.childNodes[index], 'textContent', e.text);\n          this.renderer.setStyle(this.textElement.nativeElement.childNodes[index], 'width', 'initial');\n          this.renderer.addClass(this.textElement.nativeElement.childNodes[index], 'show');\n          this.renderer.removeClass(this.textElement.nativeElement.childNodes[index], \"hide\");\n        });\n      }\n    }\n\n  }\n\n  GamePageComponent.ɵfac = function GamePageComponent_Factory(t) {\n    return new (t || GamePageComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.GameService));\n  };\n\n  GamePageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GamePageComponent,\n    selectors: [[\"game-page\"]],\n    viewQuery: function GamePageComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.titleElement = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.textElement = _t.first);\n      }\n    },\n    decls: 17,\n    vars: 3,\n    consts: [[1, \"container\"], [1, \"sideBar\"], [4, \"ngFor\", \"ngForOf\"], [1, \"content-container\"], [1, \"input-container\"], [\"title\", \"Mot\", \"color\", \"light\", 3, \"keydown.enter\", \"inputEvent\"], [1, \"button-red-1\", 3, \"click\"], [1, \"text-container\"], [1, \"title\"], [\"titleId\", \"\"], [\"class\", \"hide\", 4, \"ngFor\", \"ngForOf\"], [1, \"text\"], [\"textId\", \"\"], [1, \"carrousel-container\"], [1, \"number\"], [1, \"hide\"]],\n    template: function GamePageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, GamePageComponent_div_2_Template, 5, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"textbox\", 5);\n        i0.ɵɵlistener(\"keydown.enter\", function GamePageComponent_Template_textbox_keydown_enter_5_listener() {\n          return ctx.testMot();\n        })(\"inputEvent\", function GamePageComponent_Template_textbox_inputEvent_5_listener($event) {\n          return ctx.updateInput($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function GamePageComponent_Template_button_click_6_listener() {\n          return ctx.testMot();\n        });\n        i0.ɵɵtext(7, \"Tester\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8, 9);\n        i0.ɵɵtemplate(11, GamePageComponent_span_11_Template, 2, 1, \"span\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 11, 12);\n        i0.ɵɵtemplate(14, GamePageComponent_span_14_Template, 2, 1, \"span\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 13);\n        i0.ɵɵelement(16, \"carrousel\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.testedWords.reverse());\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.titleItems);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mainItems);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.TextboxComponent, i4.CarrouselComponent],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;align-items:stretch;height:100%;width:100%;box-sizing:border-box}.sideBar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:15px;box-sizing:border-box;flex-basis:250px;background-color:#edf2f4;box-shadow:7px 0 15px #00000040}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:fit-content;padding:25px 45px;box-sizing:border-box;gap:50px}.input-container[_ngcontent-%COMP%]{width:400px;display:flex;justify-content:space-between;align-items:flex-end}.number[_ngcontent-%COMP%]{display:inline-block;background-color:#2b2d42;color:#edf2f4;font-weight:700;margin-right:.2rem;border-radius:15px;height:1.8rem;width:30px;aspect-ratio:1;text-align:center}.title[_ngcontent-%COMP%]{font-size:1.3rem;display:flex;flex-wrap:wrap;font-weight:700;color:#d90429;margin-bottom:15px}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:2rem}.text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;color:#2b2d42;width:100%}span[_ngcontent-%COMP%]{margin:7px 3px}span.hide[_ngcontent-%COMP%]{background-color:#2b2d42;color:#2b2d42;border-radius:3px;text-align:center;height:1.5rem;transition:color .15s ease-in}span.hide[_ngcontent-%COMP%]:hover{color:#edf2f4}.span.show[_ngcontent-%COMP%]{width:initial;color:inherit;background-color:#00f}span.show[_ngcontent-%COMP%]:hover{color:inherit}\"]\n  });\n  return GamePageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}